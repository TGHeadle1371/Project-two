<div class="container">
    <div class="row">
        <div class="col-sm-12">
            <h1>Hi,
                {{# if loggedin}}
                {{userName}}
                {{/if}} Welcome to your Dashboard. You are a user!</h1>
        </div>
    </div>
</div>

 
  <div class="container-fluid bg-light">

      <div class="row justify-content-md-center">
        <div class="col-md-6 justify-content-center">

              <h2 class="text-primary">Exercises</h2>

              <ul>
                {{#each exercises}}
                    <li>
                        <p class="text-primary">
                            {{this.Exercise}}     			             
                            <button class="delete btn btn-outline-primary" id="delete" data-id="{{id}}">Delete Exercise</button>                        
                        </p>
                    </li>

                {{/each}}
              </ul>
        </div>


        <div class="col-md-6 justify-content-center">
            <h2 class="text-primary">Exercise Videos</h2>

            <ul>
              {{#each exercises}}

                  <li>
                      <p class="text-primary">
                          {{this.Exercise}}
                      </p>
                  </li>

              {{/each}}
            </ul>
        </div>

      </div>

  </div>

  <br>


      <div class="row">
        <div class="col-md-2">
        </div>
          <div class="col-md-8  bg-primary">
              <h2 class="text-white justify-content-center text-center">Add an Exercise!</h2>

              <br>

              <div class="row">
                <div class="col-md-2">
                </div>  

                   <div class="col-md-8">
                      <form class="create-update-form justify-content-center">

                        <div class="form-group justify-content-center">
                          <label for="ca" class="text-white text-center">Exercise:</label>
                          <textarea type="text" id="ca" name="exercise"></textarea>
                          <button type="submit" id="add" class="btn-success">Create Exercise</button>
                        </div>
                    
                      </form>
                    </div>

                <div class="col-md-2">
                </div> 
              </div>
            </div>
        <div class="col-md-2">        
        </div>
      </div>
    
    <br>

</div>


<script type="text/javascript">

$("#delete").on("click", function(event) {
      event.preventDefault();

      var id = $(this).data("id");
        
      // Send the PUT request.
      $.ajax("/api/exercises/" + id, {
        type: "DELETE"
      }).then(
        function() {
          console.log("deleted" + id);
          // Reload the page to get the updated list
          location.reload();
        }
      );
  });
  
$("#add").on("click", function(event) {
      // Make sure to preventDefault on a submit event.
      event.preventDefault();
  
      var newExercise = {
        Exercise: $("#ca[name=exercise]").val().trim()
      };
  
      // Send the POST request.
      $.ajax("/api/exercises", {
        type: "POST",
        data: newExercise
      }).then(
        function() {
          console.log("added " + newExercise + "." );
          // Reload the page to get the updated list
          location.reload();
        }
      );
  });

</script>
